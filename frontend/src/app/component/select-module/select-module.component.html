<nav class="navbar">
  <ul>
    <li><a routerLink="/">  الرئيسية </a></li>
    <li><a routerLink="/about"> شكون احنا؟</a></li>
    <li><a routerLink="/contact">كلمنا</a></li>
  </ul>
</nav>
<app-avatar></app-avatar>
<div class="module-container" dir="rtl">
  <div class="module-box">

    <!-- Loading overlay -->
    <div *ngIf="loading" class="loading-overlay">
      <div class="spinner"></div>
    </div>

    <div class="module-header">
      <h2 *ngIf="!selectedSubject">اختر المادة</h2>
      <h2 *ngIf="selectedSubject">
        اختر المحور في 
        <span [style.color]="selectedSubject.color">
          {{selectedSubject.name}}
        </span>
      </h2>
      <div class="header-decoration">
        <span class="star">⭐</span>
        <span class="star">⭐</span>
        <span class="star">⭐</span>
      </div>
    </div>

    <div *ngIf="!selectedSubject" class="subjects-container">
      <div
        class="subject-card"
        *ngFor="let subject of subjects"
        (click)="selectSubject(subject)"
      >
        <div class="subject-icon">
          <img [src]="subject.icon" [alt]="'أيقونة ' + subject.name" />
        </div>
        <h3 [style.color]="subject.color">{{subject.name}}</h3>
      </div>
    </div>

    <div *ngIf="selectedSubject" class="modules-container">
      <div
        class="module-card"
        *ngFor="let module of selectedSubject.modules"
        (click)="selectModule(module)"
      >
        <div class="module-icon">
          <img [src]="module.icon" [alt]="'أيقونة ' + module.name" />
        </div>
        <h4>{{module.name}}</h4>
      </div>
      <button class="back-button" (click)="goBack()">
        <img src="/assets/images/sent.png" alt="Back" />
        <span>عودة</span>
      </button>

      <!-- Error message -->
      <div *ngIf="errorMsg" class="mt-2 text-red-600">
        ⚠️ {{ errorMsg }}
      </div>

      <!-- Result display -->
      <div *ngIf="result && !loading" class="mt-4 p-4 border rounded">
        <p>✅ تم حفظ الملف: <code>{{ result.path }}</code></p>
        <h3 class="font-bold">{{ result.data.title }}</h3>
        <div *ngFor="let slide of result.data.slides">
          <ng-container *ngFor="let kv of slide | keyvalue">
            <p><strong>شريحة {{ kv.key }}:</strong> {{ kv.value }}</p>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
